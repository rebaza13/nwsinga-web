import{c as D,d as i,q as R,g as y,a as d,f as S,u as k,e as E,b}from"./firebase-KNU8sfuI.js";import{u as x}from"./use-quasar-BtzAyJjx.js";import{u as A}from"./vue-i18n.runtime-Brl3r92v.js";import{r as v}from"./index-D0a3PjNi.js";function z(n){const c=x(),{t:u}=A(),a=v(!1),s=v(null),l=D(i,n),m=async()=>{a.value=!0,s.value=null;try{return(await y(l)).docs.map(t=>({id:t.id,...t.data()}))}catch(r){return o(r),[]}finally{a.value=!1}},p=async r=>{a.value=!0,s.value=null;try{const e=d(i,n,r),t=await b(e);return t.exists()?{id:t.id,...t.data()}:null}catch(e){return o(e),null}finally{a.value=!1}},h=async r=>{a.value=!0,s.value=null;try{const e=await E(l,r);return c.notify({color:"positive",message:u("common.success"),icon:"check"}),e.id}catch(e){return o(e),null}finally{a.value=!1}},g=async(r,e)=>{a.value=!0,s.value=null;try{const t=d(i,n,r);return await k(t,e),c.notify({color:"positive",message:u("common.success"),icon:"check"}),!0}catch(t){return o(t),!1}finally{a.value=!1}},q=async r=>{a.value=!0,s.value=null;try{const e=d(i,n,r);return await S(e),c.notify({color:"positive",message:u("common.success"),icon:"check"}),!0}catch(e){return o(e),!1}finally{a.value=!1}},w=async(...r)=>{a.value=!0,s.value=null;try{const e=R(l,...r);return(await y(e)).docs.map(f=>({id:f.id,...f.data()}))}catch(e){return o(e),[]}finally{a.value=!1}},o=r=>{console.error(`Firestore error (${n}):`,r),s.value=r.message||"An error occurred",c.notify({color:"negative",message:u("common.error"),caption:s.value||"",icon:"error"})};return{loading:a,error:s,getAll:m,getById:p,add:h,update:g,remove:q,queryDocuments:w,clearError:()=>{s.value=null},collectionRef:l}}export{z as u};
