const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-DUEw5crB.js","assets/index-D0a3PjNi.js","assets/index-DINpERDM.css","assets/QTooltip-BGagMJ-T.js","assets/QPage-BSv_0Jxy.js","assets/use-quasar-BtzAyJjx.js","assets/useFirestore-C2-a9jAw.js","assets/firebase-KNU8sfuI.js","assets/vue-i18n.runtime-Brl3r92v.js","assets/_plugin-vue_export-helper-DlAUqK2U.js"])))=>i.map(i=>d[i]);
import{ar as Ve,r as S,b as re,aB as qe,V as je,p as be,S as Fe,W as $,X as c,ab as y,a3 as B,Y as s,$ as h,Z as U,ai as x,ag as J,aw as ae,_ as j,a0 as we,a7 as se,a6 as ne,aj as le,ak as Z,k as z,ap as ye,au as De,aC as Ne,ao as ie,as as ce,am as Ce,aD as ke,a2 as ue,a4 as ee,ae as X,aE as $e,a5 as de,af as N,ad as g,a1 as Ie,aq as Qe,aF as Me,at as T,ah as We}from"./index-D0a3PjNi.js";import{Q as Be}from"./QTooltip-BGagMJ-T.js";import{Q as ze}from"./QPage-BSv_0Jxy.js";import{u as Re}from"./use-quasar-BtzAyJjx.js";import{u as He}from"./useFirestore-C2-a9jAw.js";import{w as Ke}from"./firebase-KNU8sfuI.js";import{u as Te}from"./vue-i18n.runtime-Brl3r92v.js";import{_ as Ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ye=Ve("contacts",()=>{const t=S([]),e=S(!1),o=S(null),{getAll:n,add:l,update:r,remove:f,queryDocuments:v}=He("contacts"),_=[{name:"Ahmed Mohammed",phoneNumber:"+964 750 123 4567",email:"ahmed@example.com",notes:"Property manager",favorite:!0},{name:"Sara Ali",phoneNumber:"+964 770 987 6543",email:"sara@example.com",notes:"Tenant in Building A",favorite:!1},{name:"Karzan Omar",phoneNumber:"+964 750 555 7777",email:"karzan@example.com",notes:"Contractor",favorite:!0},{name:"Zhila Karim",phoneNumber:"+964 770 444 3333",email:"zhila@example.com",notes:"Lawyer",favorite:!1},{name:"Rebaz Ahmad",phoneNumber:"+964 750 888 9999",email:"rebaz@example.com",notes:"Property owner",favorite:!0}],O=async()=>{e.value=!0,o.value=null;try{const u=await n();if(u.length===0){console.log("No contacts found in Firestore, adding sample data...");for(const m of _)await l(m);t.value=await n()}else t.value=u;console.log("Loaded contacts from Firestore:",t.value)}catch(u){console.error("Error loading contacts from Firestore:",u),o.value=u instanceof Error?u.message:"Unknown error loading contacts",t.value=[]}finally{e.value=!1}},R=async u=>{try{const m={...u,favorite:u.favorite??!1},p=await l(m);if(p){const k={id:p,...m};return t.value.push(k),p}return null}catch(m){return console.error("Error adding contact:",m),o.value=m instanceof Error?m.message:"Unknown error adding contact",null}},b=async u=>{e.value=!0,o.value=null;const m={added:0,skipped:0,errors:0};try{for(const p of u){if(!p.phoneNumber){m.skipped++;continue}if(await H(p.phoneNumber)){m.skipped++;continue}await R(p)?m.added++:m.errors++}return m}catch(p){return console.error("Error importing contacts:",p),o.value=p instanceof Error?p.message:"Unknown error importing contacts",m}finally{e.value=!1}},w=async(u,m)=>{try{if(await r(u,m)){const k=t.value.findIndex(Y=>Y.id===u);return k!==-1&&(t.value[k]={...t.value[k],...m}),!0}return!1}catch(p){return console.error("Error updating contact:",p),o.value=p instanceof Error?p.message:"Unknown error updating contact",!1}},I=async u=>{try{if(await f(u)){const p=t.value.findIndex(k=>k.id===u);return p!==-1&&t.value.splice(p,1),!0}return!1}catch(m){return console.error("Error deleting contact:",m),o.value=m instanceof Error?m.message:"Unknown error deleting contact",!1}},Q=async u=>{try{const m=t.value.find(p=>p.id===u);if(m){const p=!m.favorite;if(await r(u,{favorite:p}))return m.favorite=p,!0}return!1}catch(m){return console.error("Error toggling favorite status:",m),o.value=m instanceof Error?m.message:"Unknown error toggling favorite",!1}},M=re(()=>{const u={};return t.value.forEach(m=>{const p=m.name.charAt(0).toUpperCase();u[p]||(u[p]=[]),u[p].push(m)}),Object.keys(u).forEach(m=>{u[m].sort((p,k)=>p.name.localeCompare(k.name))}),u}),V=re(()=>Object.keys(M.value).sort()),oe=re(()=>t.value.filter(u=>u.favorite)),H=async u=>{try{return(await v(Ke("phoneNumber","==",u))).length>0}catch(m){return console.error("Error checking if contact exists:",m),!1}};return{contacts:t,loading:e,error:o,loadContacts:O,addContact:R,updateContact:w,deleteContact:I,toggleFavorite:Q,importContacts:b,contactsByLetter:M,availableLetters:V,favoriteContacts:oe,contactExists:H}});/*! Capacitor: https://capacitorjs.com/ - MIT License */var te;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(te||(te={}));class me extends Error{constructor(e,o,n){super(e),this.message=e,this.code=o,this.data=n}}const Je=t=>{var e,o;return t?.androidBridge?"android":!((o=(e=t?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||o===void 0)&&o.bridge?"ios":"web"},Ze=t=>{const e=t.CapacitorCustomPlatform||null,o=t.Capacitor||{},n=o.Plugins=o.Plugins||{},l=()=>e!==null?e.name:Je(t),r=()=>l()!=="web",f=b=>{const w=O.get(b);return!!(w?.platforms.has(l())||v(b))},v=b=>{var w;return(w=o.PluginHeaders)===null||w===void 0?void 0:w.find(I=>I.name===b)},_=b=>t.console.error(b),O=new Map,R=(b,w={})=>{const I=O.get(b);if(I)return console.warn(`Capacitor plugin "${b}" already registered. Cannot register plugins twice.`),I.proxy;const Q=l(),M=v(b);let V;const oe=async()=>(!V&&Q in w?V=typeof w[Q]=="function"?V=await w[Q]():V=w[Q]:e!==null&&!V&&"web"in w&&(V=typeof w.web=="function"?V=await w.web():V=w.web),V),H=(E,P)=>{var F,K;if(M){const q=M?.methods.find(L=>P===L.name);if(q)return q.rtype==="promise"?L=>o.nativePromise(b,P.toString(),L):(L,G)=>o.nativeCallback(b,P.toString(),L,G);if(E)return(F=E[P])===null||F===void 0?void 0:F.bind(E)}else{if(E)return(K=E[P])===null||K===void 0?void 0:K.bind(E);throw new me(`"${b}" plugin is not implemented on ${Q}`,te.Unimplemented)}},u=E=>{let P;const F=(...K)=>{const q=oe().then(L=>{const G=H(L,E);if(G){const A=G(...K);return P=A?.remove,A}else throw new me(`"${b}.${E}()" is not implemented on ${Q}`,te.Unimplemented)});return E==="addListener"&&(q.remove=async()=>P()),q};return F.toString=()=>`${E.toString()}() { [capacitor code] }`,Object.defineProperty(F,"name",{value:E,writable:!1,configurable:!1}),F},m=u("addListener"),p=u("removeListener"),k=(E,P)=>{const F=m({eventName:E},P),K=async()=>{const L=await F;p({eventName:E,callbackId:L},P)},q=new Promise(L=>F.then(()=>L({remove:K})));return q.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await K()},q},Y=new Proxy({},{get(E,P){switch(P){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return M?k:m;case"removeListener":return p;default:return u(P)}}});return n[b]=Y,O.set(b,{name:b,proxy:Y,platforms:new Set([...Object.keys(w),...M?[Q]:[]])}),Y};return o.convertFileSrc||(o.convertFileSrc=b=>b),o.getPlatform=l,o.handleError=_,o.isNativePlatform=r,o.isPluginAvailable=f,o.registerPlugin=R,o.Exception=me,o.DEBUG=!!o.DEBUG,o.isLoggingEnabled=!!o.isLoggingEnabled,o},Xe=t=>t.Capacitor=Ze(t),pe=Xe(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),ve=pe.registerPlugin;class Se{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,o){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(o);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),n&&this.sendRetainedArgumentsForEvent(e);const f=async()=>this.removeListener(e,o);return Promise.resolve({remove:f})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,o,n){const l=this.listeners[e];if(!l){if(n){let r=this.retainedEventArguments[e];r||(r=[]),r.push(o),this.retainedEventArguments[e]=r}return}l.forEach(r=>r(o))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,o){this.windowListeners[o]={registered:!1,windowEventName:e,pluginEventName:o,handler:n=>{this.notifyListeners(o,n)}}}unimplemented(e="not implemented"){return new pe.Exception(e,te.Unimplemented)}unavailable(e="not available"){return new pe.Exception(e,te.Unavailable)}async removeListener(e,o){const n=this.listeners[e];if(!n)return;const l=n.indexOf(o);this.listeners[e].splice(l,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const o=this.retainedEventArguments[e];o&&(delete this.retainedEventArguments[e],o.forEach(n=>{this.notifyListeners(e,n)}))}}const _e=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Ee=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class et extends Se{async getCookies(){const e=document.cookie,o={};return e.split(";").forEach(n=>{if(n.length<=0)return;let[l,r]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");l=Ee(l).trim(),r=Ee(r).trim(),o[l]=r}),o}async setCookie(e){try{const o=_e(e.key),n=_e(e.value),l=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),f=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${o}=${n||""}${l}; path=${r}; ${f};`}catch(o){return Promise.reject(o)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(o){return Promise.reject(o)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const o of e)document.cookie=o.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}ve("CapacitorCookies",{web:()=>new et});const tt=async t=>new Promise((e,o)=>{const n=new FileReader;n.onload=()=>{const l=n.result;e(l.indexOf(",")>=0?l.split(",")[1]:l)},n.onerror=l=>o(l),n.readAsDataURL(t)}),ot=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(l=>l.toLocaleLowerCase()).reduce((l,r,f)=>(l[r]=t[e[f]],l),{})},at=(t,e=!0)=>t?Object.entries(t).reduce((n,l)=>{const[r,f]=l;let v,_;return Array.isArray(f)?(_="",f.forEach(O=>{v=e?encodeURIComponent(O):O,_+=`${r}=${v}&`}),_.slice(0,-1)):(v=e?encodeURIComponent(f):f,_=`${r}=${v}`),`${n}&${_}`},"").substr(1):null,st=(t,e={})=>{const o=Object.assign({method:t.method||"GET",headers:t.headers},e),l=ot(t.headers)["content-type"]||"";if(typeof t.data=="string")o.body=t.data;else if(l.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams;for(const[f,v]of Object.entries(t.data||{}))r.set(f,v);o.body=r.toString()}else if(l.includes("multipart/form-data")||t.data instanceof FormData){const r=new FormData;if(t.data instanceof FormData)t.data.forEach((v,_)=>{r.append(_,v)});else for(const v of Object.keys(t.data))r.append(v,t.data[v]);o.body=r;const f=new Headers(o.headers);f.delete("content-type"),o.headers=f}else(l.includes("application/json")||typeof t.data=="object")&&(o.body=JSON.stringify(t.data));return o};class nt extends Se{async request(e){const o=st(e,e.webFetchExtra),n=at(e.params,e.shouldEncodeUrlParams),l=n?`${e.url}?${n}`:e.url,r=await fetch(l,o),f=r.headers.get("content-type")||"";let{responseType:v="text"}=r.ok?e:{};f.includes("application/json")&&(v="json");let _,O;switch(v){case"arraybuffer":case"blob":O=await r.blob(),_=await tt(O);break;case"json":_=await r.json();break;case"document":case"text":default:_=await r.text()}const R={};return r.headers.forEach((b,w)=>{R[w]=b}),{data:_,headers:R,status:r.status,url:r.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}ve("CapacitorHttp",{web:()=>new nt});var Le;(function(t){t.Home="home",t.Work="work",t.Other="other",t.Custom="custom",t.Mobile="mobile",t.FaxWork="fax_work",t.FaxHome="fax_home",t.Pager="pager",t.Callback="callback",t.Car="car",t.CompanyMain="company_main",t.Isdn="isdn",t.Main="main",t.OtherFax="other_fax",t.Radio="radio",t.Telex="telex",t.TtyTdd="tty_tdd",t.WorkMobile="work_mobile",t.WorkPager="work_pager",t.Assistant="assistant",t.Mms="mms"})(Le||(Le={}));var Pe;(function(t){t.Home="home",t.Work="work",t.Other="other",t.Custom="custom",t.Mobile="mobile"})(Pe||(Pe={}));var Ue;(function(t){t.Home="home",t.Work="work",t.Other="other",t.Custom="custom"})(Ue||(Ue={}));const fe=ve("Contacts",{web:()=>qe(()=>import("./web-DUEw5crB.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])).then(t=>new t.ContactsWeb)});class Ae{static async checkPermissions(){try{return{granted:(await fe.checkPermissions()).contacts==="granted"}}catch(e){return console.error("Error checking contacts permissions:",e),{granted:!1}}}static async requestPermissions(){try{return{granted:(await fe.requestPermissions()).contacts==="granted"}}catch(e){return console.error("Error requesting contacts permissions:",e),{granted:!1}}}static async getDeviceContacts(){try{if(!(await this.checkPermissions()).granted&&!(await this.requestPermissions()).granted)throw new Error("Permission to access contacts was denied");return(await fe.getContacts({projection:{name:!0,phones:!0,emails:!0}})).contacts.map(n=>{let l="Unknown";typeof n.name=="object"&&n.name!==null&&(l=n.name.display||n.name.given||n.name.family||"Unknown");const r=[];Array.isArray(n.phones)&&n.phones.forEach(v=>{v&&typeof v.number=="string"&&r.push({label:v.label||v.type||"Other",number:v.number})});const f=[];return Array.isArray(n.emails)&&n.emails.forEach(v=>{v&&typeof v.address=="string"&&f.push({label:v.label||v.type||"Other",address:v.address})}),{contactId:n.contactId,displayName:l,phoneNumbers:r,emails:f}})}catch(e){throw console.error("Error getting device contacts:",e),e}}static convertDeviceContactToAppContact(e){const o=e.phoneNumbers&&e.phoneNumbers.length>0?e.phoneNumbers[0].number:"",n=e.emails&&e.emails.length>0?e.emails[0].address:void 0;let l="";return e.phoneNumbers&&e.phoneNumbers.length>1&&(l+=`Additional phone numbers:
`,e.phoneNumbers.slice(1).forEach(r=>{l+=`${r.label||"Phone"}: ${r.number}
`})),e.emails&&e.emails.length>1&&(l+=`Additional emails:
`,e.emails.slice(1).forEach(r=>{l+=`${r.label||"Email"}: ${r.address}
`})),{name:e.displayName||"Unknown",phoneNumber:o,email:n,notes:l.trim()||void 0,favorite:!1}}}const rt={class:"q-mb-lg"},lt={class:"row justify-between items-center"},it={class:"text-h4 q-my-none"},ct={class:"q-mb-md"},ut={class:"row items-center q-col-gutter-md"},dt={class:"col-12 col-sm-8"},mt={key:0,class:"col-12 col-sm-4"},ft={key:0,class:"text-center q-pa-lg"},pt={class:"text-subtitle1 q-mt-sm"},vt={key:1,class:"text-center q-pa-lg"},gt={class:"text-subtitle1 q-mt-sm"},ht={key:2,class:"contacts-container"},bt={class:"alphabetical-index q-px-sm"},wt=["onClick"],yt={class:"contacts-list"},Ct=["id"],kt={class:"letter-header"},$t={class:"row items-center"},_t={class:"text-h6"},Et={class:"q-ml-sm"},Lt={class:"text-h6"},Pt={class:"text-caption"},Ut={style:{"max-height":"300px","overflow-y":"auto"}},At={class:"text-center q-py-md"},St={class:"text-h6 q-mt-md"},xt={class:"text-left q-mt-lg"},Ot={key:0,class:"text-negative"},Vt=je({__name:"ContactsPage",setup(t){const{t:e}=Te(),o=Re(),n=Ye();be(async()=>{await n.loadContacts(),console.log("Contacts loaded from Firestore:",n.contacts)});const l=S(!1),r=S(!1),f=Fe({id:"",name:"",phoneNumber:"",email:"",notes:"",favorite:!1}),v=()=>{Object.assign(f,{id:"",name:"",phoneNumber:"",email:"",notes:"",favorite:!1})},_=()=>{v(),r.value=!1,l.value=!0},O=a=>{Object.assign(f,a),r.value=!0,l.value=!0},R=()=>{v(),l.value=!1},b=async()=>{r.value?await n.updateContact(f.id,{name:f.name,phoneNumber:f.phoneNumber,email:f.email,notes:f.notes,favorite:f.favorite})&&o.notify({color:"positive",message:e("contacts.contactUpdated"),icon:"check"}):await n.addContact({name:f.name,phoneNumber:f.phoneNumber,email:f.email,notes:f.notes,favorite:f.favorite})&&o.notify({color:"positive",message:e("contacts.contactAdded"),icon:"check"}),v(),l.value=!1},w=S(!1),I=S(null),Q=a=>{I.value=a,w.value=!0},M=async()=>{I.value&&await n.deleteContact(I.value.id)&&o.notify({color:"positive",message:e("contacts.contactDeleted"),icon:"check"}),w.value=!1,I.value=null},V=a=>{window.location.href=`tel:${a}`},oe=a=>{const d=a.replace(/\D/g,"");window.location.href=`https://wa.me/${d}`,o.notify({color:"green-7",textColor:"white",icon:"chat",message:e("contacts.whatsapp")+": "+a})},H=S(!1),u=S("intro"),m=S([]),p=S(!1),k=S({added:0,skipped:0,errors:0}),Y=async()=>{try{u.value="loading";const a=await Ae.getDeviceContacts();m.value=a.map(d=>({...d,selected:!1})),u.value="selection"}catch(a){console.error("Failed to import contacts:",a),o.notify({color:"negative",message:e("contacts.permissionDenied"),icon:"error"}),H.value=!1,u.value="intro"}},E=()=>{m.value.forEach(a=>{a.selected=p.value})},P=()=>m.value.filter(a=>a.selected).length,F=async()=>{try{u.value="loading";const a=m.value.filter(d=>d.selected).map(d=>Ae.convertDeviceContactToAppContact(d));k.value=await n.importContacts(a),u.value="result"}catch(a){console.error("Failed to import selected contacts:",a),o.notify({color:"negative",message:e("contacts.importError"),icon:"error"}),u.value="selection"}},K=()=>{m.value=[],p.value=!1,u.value="intro"},q=S(""),L=re(()=>{if(!n.contactsByLetter)return{};let a=n.contactsByLetter;if(q.value){const d=q.value.toLowerCase(),i={};Object.keys(a).forEach(C=>{const D=a[C].filter(W=>W.name.toLowerCase().includes(d)||W.phoneNumber.includes(d)||W.email&&W.email.toLowerCase().includes(d)||W.notes&&W.notes.toLowerCase().includes(d));D.length>0&&(i[C]=D)}),a=i}if(A.value){const d={};a[A.value]&&(d[A.value]=a[A.value]),a=d}return a}),G=S(""),A=S(""),ge=()=>{A.value="",console.log("Clearing letter filter")},xe=a=>{G.value=a,A.value===a?ge():(A.value=a,console.log(`Filtering by letter: ${a}`),setTimeout(()=>{const d=document.getElementById(`letter-${a}`);if(d){const C=window.innerWidth<600?60:-80,W=d.getBoundingClientRect().top+window.pageYOffset+C;window.scrollTo({top:W,behavior:"smooth"}),console.log(`Scrolling to letter ${a}, element:`,d)}else console.log(`Element for letter ${a} not found`)},100))};return be(()=>{const a=()=>{const d=document.querySelectorAll('[id^="letter-"]'),i=window.innerWidth<600,C=window.scrollY+(i?50:100);for(let D=0;D<d.length;D++){const W=d[D],he=d[D+1];if(C>=W.offsetTop&&(!he||C<he.offsetTop)){const Oe=W.id.replace("letter-","");G.value=Oe;break}}};window.addEventListener("scroll",a),n.availableLetters.length>0&&(G.value=n.availableLetters[0])}),(a,d)=>(g(),$(ze,{padding:""},{default:c(()=>[y("div",rt,[y("div",lt,[y("h1",it,h(a.$t("contacts.title")),1),y("div",null,[s(U,{color:"secondary",label:a.$t("contacts.importContacts"),onClick:d[0]||(d[0]=i=>H.value=!0),icon:"import_contacts",flat:"",class:"q-mr-sm"},null,8,["label"]),s(U,{color:"primary",label:a.$t("contacts.addContact"),onClick:d[1]||(d[1]=i=>_()),icon:"person_add",unelevated:""},null,8,["label"])])])]),y("div",ct,[y("div",ut,[y("div",dt,[s(ae,{modelValue:q.value,"onUpdate:modelValue":d[2]||(d[2]=i=>q.value=i),placeholder:a.$t("contacts.searchContacts"),outlined:"",dense:"",clearable:""},{append:c(()=>[s(J,{name:"search"})]),_:1},8,["modelValue","placeholder"])]),A.value?(g(),B("div",mt,[s(U,{color:"primary",outline:"",class:"full-width",onClick:ge},{default:c(()=>[s(J,{name:"filter_alt_off",class:"q-mr-xs"}),j(" "+h(a.$t("common.clearFilter"))+": "+h(A.value),1)]),_:1})])):x("",!0)])]),we(n).loading?(g(),B("div",ft,[s(ke,{color:"primary",size:"3em"}),y("p",pt,h(a.$t("common.loading")),1)])):!L.value||Object.keys(L.value).length===0?(g(),B("div",vt,[s(J,{name:"people",size:"4rem",color:"grey-5"}),y("p",gt,h(a.$t("contacts.noContacts")),1)])):(g(),B("div",ht,[y("div",bt,[(g(!0),B(se,null,ne(we(n).availableLetters,i=>(g(),B("div",{key:i,class:Ie(["letter-item q-my-xs cursor-pointer",{active:i===G.value,selected:i===A.value}]),onClick:C=>xe(i)},h(i),11,wt))),128))]),y("div",yt,[(g(!0),B(se,null,ne(Object.keys(L.value||{}).sort(),i=>(g(),B("div",{key:i,id:`letter-${i}`},[y("div",kt,h(i),1),s(ue,{separator:""},{default:c(()=>[(g(!0),B(se,null,ne(L.value&&L.value[i]||[],C=>z((g(),$(X,{key:C.id,clickable:"",class:"contact-item"},{default:c(()=>[s(N,{avatar:""},{default:c(()=>[s(Ce,{color:"primary","text-color":"white"},{default:c(()=>[j(h(C.name.charAt(0).toUpperCase()),1)]),_:2},1024)]),_:2},1024),s(N,null,{default:c(()=>[s(ee,{class:"text-weight-medium"},{default:c(()=>[j(h(C.name),1)]),_:2},1024),s(ee,{caption:""},{default:c(()=>[j(h(C.phoneNumber),1)]),_:2},1024),C.email?(g(),$(ee,{key:0,caption:""},{default:c(()=>[j(h(C.email),1)]),_:2},1024)):x("",!0)]),_:2},1024),s(N,{side:""},{default:c(()=>[y("div",$t,[s(U,{round:"",color:"primary",icon:"call",size:"md",class:"q-mr-sm",onClick:Qe(D=>V(C.phoneNumber),["stop"])},{default:c(()=>[s(Be,null,{default:c(()=>[j(h(a.$t("contacts.call")),1)]),_:1})]),_:2},1032,["onClick"]),s(U,{round:"",flat:"",color:"grey",icon:"more_vert",size:"sm"},{default:c(()=>[s(Me,{"transition-show":"jump-down","transition-hide":"jump-up"},{default:c(()=>[s(ue,{style:{"min-width":"150px"}},{default:c(()=>[z((g(),$(X,{clickable:"",onClick:D=>oe(C.phoneNumber)},{default:c(()=>[s(N,{avatar:""},{default:c(()=>[s(J,{color:"green-7",name:"fab fa-whatsapp"})]),_:1}),s(N,null,{default:c(()=>[j(h(a.$t("contacts.whatsapp")),1)]),_:1})]),_:2},1032,["onClick"])),[[T]]),s(de),z((g(),$(X,{clickable:"",onClick:D=>O(C)},{default:c(()=>[s(N,{avatar:""},{default:c(()=>[s(J,{color:"secondary",name:"edit"})]),_:1}),s(N,null,{default:c(()=>[j(h(a.$t("contacts.edit")),1)]),_:1})]),_:2},1032,["onClick"])),[[T]]),s(de),z((g(),$(X,{clickable:"",onClick:D=>Q(C)},{default:c(()=>[s(N,{avatar:""},{default:c(()=>[s(J,{color:"negative",name:"delete"})]),_:1}),s(N,null,{default:c(()=>[j(h(a.$t("contacts.delete")),1)]),_:1})]),_:2},1032,["onClick"])),[[T]])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:2},1024)]),_:2},1024)),[[We]])),128))]),_:2},1024)],8,Ct))),128))])])),s(ce,{modelValue:l.value,"onUpdate:modelValue":d[8]||(d[8]=i=>l.value=i),persistent:""},{default:c(()=>[s(le,{style:{width:"500px","max-width":"90vw"}},{default:c(()=>[s(Z,{class:"row items-center"},{default:c(()=>[y("div",_t,h(r.value?a.$t("contacts.edit"):a.$t("contacts.addContact")),1),s(ye),z(s(U,{icon:"close",flat:"",round:"",dense:"",onClick:R},null,512),[[T]])]),_:1}),s(Z,{class:"q-pt-none"},{default:c(()=>[s(De,{onSubmit:b,class:"q-gutter-md"},{default:c(()=>[s(ae,{modelValue:f.name,"onUpdate:modelValue":d[3]||(d[3]=i=>f.name=i),label:a.$t("contacts.name")+" *",outlined:"",rules:[i=>!!i||a.$t("common.required")]},null,8,["modelValue","label","rules"]),s(ae,{modelValue:f.phoneNumber,"onUpdate:modelValue":d[4]||(d[4]=i=>f.phoneNumber=i),label:a.$t("contacts.phoneNumber")+" *",outlined:"",type:"tel",rules:[i=>!!i||a.$t("common.required"),i=>/^[+]?[\d\s-]{8,}$/.test(i)||a.$t("common.invalidPhone")]},null,8,["modelValue","label","rules"]),s(ae,{modelValue:f.email,"onUpdate:modelValue":d[5]||(d[5]=i=>f.email=i),label:a.$t("contacts.email"),outlined:"",type:"email"},null,8,["modelValue","label"]),s(ae,{modelValue:f.notes,"onUpdate:modelValue":d[6]||(d[6]=i=>f.notes=i),label:a.$t("contacts.notes"),outlined:"",type:"textarea",rows:"3"},null,8,["modelValue","label"]),s(Ne,{modelValue:f.favorite,"onUpdate:modelValue":d[7]||(d[7]=i=>f.favorite=i),label:a.$t("common.favorite")},null,8,["modelValue","label"])]),_:1})]),_:1}),s(ie,{align:"right"},{default:c(()=>[z(s(U,{label:a.$t("common.cancel"),color:"grey-7",flat:"",onClick:R},null,8,["label"]),[[T]]),s(U,{label:a.$t("common.save"),color:"primary",onClick:b,unelevated:""},null,8,["label"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(ce,{modelValue:w.value,"onUpdate:modelValue":d[9]||(d[9]=i=>w.value=i),persistent:""},{default:c(()=>[s(le,null,{default:c(()=>[s(Z,{class:"row items-center"},{default:c(()=>[s(Ce,{icon:"warning",color:"negative","text-color":"white"}),y("span",Et,h(a.$t("contacts.confirmDelete")),1)]),_:1}),s(ie,{align:"right"},{default:c(()=>[z(s(U,{flat:"",label:a.$t("common.cancel"),color:"primary"},null,8,["label"]),[[T]]),z(s(U,{flat:"",label:a.$t("common.yes"),color:"negative",onClick:M},null,8,["label"]),[[T]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(ce,{modelValue:H.value,"onUpdate:modelValue":d[13]||(d[13]=i=>H.value=i),persistent:""},{default:c(()=>[s(le,{style:{width:"500px","max-width":"90vw"}},{default:c(()=>[s(Z,{class:"row items-center"},{default:c(()=>[y("div",Lt,h(a.$t("contacts.importContacts")),1),s(ye),z(s(U,{icon:"close",flat:"",round:"",dense:"",onClick:d[10]||(d[10]=i=>H.value=!1)},null,512),[[T]])]),_:1}),u.value==="intro"?(g(),$(Z,{key:0},{default:c(()=>[y("p",null,h(a.$t("contacts.importExplanation")),1),y("p",Pt,h(a.$t("contacts.importPermissionNote")),1)]),_:1})):x("",!0),u.value==="loading"?(g(),$(Z,{key:1,class:"text-center q-py-lg"},{default:c(()=>[s(ke,{color:"primary",size:"3em"}),y("p",null,h(a.$t("contacts.importLoading")),1)]),_:1})):x("",!0),u.value==="selection"?(g(),$(Z,{key:2,class:"q-pa-none"},{default:c(()=>[s(ue,{separator:""},{default:c(()=>[s(ee,{header:""},{default:c(()=>[j(h(a.$t("contacts.selectContacts")),1)]),_:1}),s(X,{class:"q-px-lg"},{default:c(()=>[s($e,{modelValue:p.value,"onUpdate:modelValue":[d[11]||(d[11]=i=>p.value=i),E],label:a.$t("common.selectAll")},null,8,["modelValue","label"])]),_:1}),s(de),y("div",Ut,[(g(!0),B(se,null,ne(m.value,i=>(g(),$(X,{key:i.contactId},{default:c(()=>[s(N,{avatar:""},{default:c(()=>[s($e,{modelValue:i.selected,"onUpdate:modelValue":C=>i.selected=C},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(N,null,{default:c(()=>[s(ee,null,{default:c(()=>[j(h(i.displayName||"Unknown"),1)]),_:2},1024),i.phoneNumbers&&i.phoneNumbers.length>0?(g(),$(ee,{key:0,caption:""},{default:c(()=>[j(h(i.phoneNumbers[0].number),1)]),_:2},1024)):x("",!0)]),_:2},1024)]),_:2},1024))),128)),m.value.length===0?(g(),$(X,{key:0,class:"text-center"},{default:c(()=>[s(N,null,{default:c(()=>[j(h(a.$t("contacts.noContactsFound")),1)]),_:1})]),_:1})):x("",!0)])]),_:1})]),_:1})):x("",!0),u.value==="result"?(g(),$(Z,{key:3,class:"q-pa-md"},{default:c(()=>[y("div",At,[k.value.added>0?(g(),$(J,{key:0,name:"check_circle",color:"positive",size:"4rem"})):(g(),$(J,{key:1,name:"info",color:"warning",size:"4rem"})),y("p",St,h(a.$t("contacts.importComplete")),1),y("div",xt,[y("p",null,h(a.$t("contacts.importAdded",{count:k.value.added})),1),y("p",null,h(a.$t("contacts.importSkipped",{count:k.value.skipped})),1),k.value.errors>0?(g(),B("p",Ot,h(a.$t("contacts.importErrors",{count:k.value.errors})),1)):x("",!0)])])]),_:1})):x("",!0),s(ie,{align:"right"},{default:c(()=>[u.value==="intro"?z((g(),$(U,{key:0,label:a.$t("common.cancel"),color:"grey-7",flat:""},null,8,["label"])),[[T]]):x("",!0),u.value==="intro"?(g(),$(U,{key:1,label:a.$t("common.start"),color:"primary",onClick:Y,unelevated:""},null,8,["label"])):x("",!0),u.value==="selection"?(g(),$(U,{key:2,label:a.$t("common.back"),color:"grey-7",flat:"",onClick:d[12]||(d[12]=i=>u.value="intro")},null,8,["label"])):x("",!0),u.value==="selection"?(g(),$(U,{key:3,label:a.$t("common.import"),color:"primary",onClick:F,disabled:P()===0,unelevated:""},null,8,["label","disabled"])):x("",!0),u.value==="result"?z((g(),$(U,{key:4,label:a.$t("common.close"),color:"primary",onClick:K,unelevated:""},null,8,["label"])),[[T]]):x("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}}),qt=Ge(Vt,[["__scopeId","data-v-59033ba3"]]),Bt=Object.freeze(Object.defineProperty({__proto__:null,default:qt},Symbol.toStringTag,{value:"Module"}));export{Bt as C,Se as W};
